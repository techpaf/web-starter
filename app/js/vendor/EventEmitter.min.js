var indexOf;indexOf="function"==typeof Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0,i=t.length,o=-1,s=!1;n<i&&!s;)t[n]===e&&(o=n,s=!0),n++;return o};var EventEmitter=function(){this.events={}};EventEmitter.prototype.on=function(t,e){"object"!=typeof this.events[t]&&(this.events[t]=[]),this.events[t].push(e)},EventEmitter.prototype.removeListener=function(t,e){var n;"object"==typeof this.events[t]&&(n=indexOf(this.events[t],e))>-1&&this.events[t].splice(n,1)},EventEmitter.prototype.emit=function(t){var e,n,i,o=[].slice.call(arguments,1);if("object"==typeof this.events[t])for(i=(n=this.events[t].slice()).length,e=0;e<i;e++)n[e].apply(this,o)},EventEmitter.prototype.once=function(t,e){this.on(t,function n(){this.removeListener(t,n),e.apply(this,arguments)})};