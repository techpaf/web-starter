var Degas=function(a){this.canvas=a,this.ctx=this.canvas.getContext("2d"),this.fullClear=!0,this.clearColor="rgba(0,0,0,0.25)",this.children=[],this.totalChildren=0,this.mouseEvent=!1,this.mouseStyle=!0,this.mouse={x:void 0,y:void 0},this.scaleRatio=1};Degas.prototype.enableMouse=function(){var a=this;this.mouseEvent=!0,this.canvas.addEventListener("mousemove",function(b){a.mouse.x=b.offsetX,a.mouse.y=b.offsetY},!1),this.canvas.addEventListener("click",function(b){for(var c=0;c<a.children.length;c++)if(void 0!=a.children[c].events.click.callback&&a["mouseover"+a.children[c].type](a.children[c])){var b={target:a.children[c],type:"click"};a.children[c].events.click.callback(b)}},!1)},Degas.prototype.disableMouse=function(){this.mouseEvent=!1,this.canvas.removeEventListener("mousemove",function(a){var b=this.canvas.getBoundingClientRect();this.mouse.x=a.clientX-b.left,this.mouse.y=a.clientY-b.top},!1)},Degas.prototype.enableMouseStyle=function(){this.mouseStyle=!0},Degas.prototype.disableMouseStyle=function(){this.mouseStyle=!1},Degas.prototype.resize=function(a,b){if(window.devicePixelRatio>1){var c=this.canvas.width,d=this.canvas.height;this.canvas.width=c*window.devicePixelRatio,this.canvas.height=d*window.devicePixelRatio,this.canvas.style.width=c,this.canvas.style.height=d,this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)}this.canvas.width=a,this.canvas.height=b},Degas.prototype.addChild=function(a){this.totalChildren++,a.uid=this.totalChildren,this.children.push(a)},Degas.prototype.removeChild=function(a){for(var b=0;b<this.children.length;b++)if(this.children[b].uid==a.uid){this.children.splice(b,1);break}},Degas.prototype.getChildIndex=function(a){for(var b=void 0,c=0;c<this.children.length;c++)if(this.children[c].uid==a.uid){b=c;break}return b},Degas.prototype.bringToFront=function(a){for(;this.getChildIndex(a)<this.children.length-1;)this.swapChildIndex(this.getChildIndex(a),this.getChildIndex(a)+1)},Degas.prototype.bringForward=function(a){this.getChildIndex(a)<this.children.length-1&&this.swapChildIndex(this.getChildIndex(a),this.getChildIndex(a)+1)},Degas.prototype.bringBackward=function(a){this.getChildIndex(a)>0&&this.swapChildIndex(this.getChildIndex(a),this.getChildIndex(a)-1)},Degas.prototype.sendToBack=function(a){for(;this.getChildIndex(a)>0;)this.swapChildIndex(this.getChildIndex(a),this.getChildIndex(a)-1)},Degas.prototype.swapChildIndex=function(a,b){return this.children.splice(b,0,this.children.splice(a,1)[0]),this},Degas.prototype.getMetName=function(a){console.log(this.drawRectangle)},Degas.prototype.empty=function(){for(;this.children.length>0;)this.children.pop()},Degas.prototype.render=function(){this.fullClear?this.ctx.clearRect(0,0,window.innerWidth,window.innerHeight):(this.ctx.fillStyle=this.clearColor,this.ctx.fillRect(0,0,window.innerWidth,window.innerHeight));for(var a=0;a<this.children.length;a++){var b=this.children[a];this.ctx.save(),void 0!=b.group&&(this.ctx.translate(b.group.x,b.group.y),this.ctx.rotate(Degas.degreeToRadian(b.group.rotation)),this.ctx.scale(b.group.scaleX,b.group.scaleY),this.ctx.globalAlpha=b.group.opacity),void 0!=b.mask&&(this.ctx.translate(b.mask.x,b.mask.y),this.ctx.rotate(Degas.degreeToRadian(b.mask.rotation)),this.ctx.scale(b.mask.scaleX,b.mask.scaleY),this.ctx.globalAlpha=b.mask.opacity,this["draw"+b.mask.type](b.mask),this.ctx.translate(-b.mask.x,-b.mask.y),this.ctx.clip()),this.ctx.translate(b.x,b.y),this.ctx.rotate(Degas.degreeToRadian(b.rotation)),this.ctx.scale(b.scaleX,b.scaleY),this.ctx.shadowBlur=b.shadowBlur,this.ctx.shadowColor=b.shadowColor,this.ctx.globalAlpha=b.opacity,this.ctx.globalCompositeOperation=b.blendMode,this["draw"+b.type](b),""!=b.fill&&(this.ctx.fillStyle=b.fill,this.ctx.fill()),""!=b.stroke&&(this.ctx.strokeStyle=b.stroke,this.ctx.lineWidth=b.strokeWidth,this.ctx.lineCap=b.lineCap,this.ctx.lineJoin=b.lineJoin,this.ctx.stroke()),this.ctx.translate(-b.x,-b.y),this.ctx.scale(1,1),this.ctx.rotate(-1*Degas.degreeToRadian(b.rotation)),this.ctx.restore()}if(this.mouseEvent){for(var a=0;a<this.children.length;a++)if(void 0!=this.children[a].events.mouseover.callback){if(this["mouseover"+this.children[a].type](this.children[a])&&!this.children[a].events.mouseover.fired){var c={target:this.children[a],type:"mouseover"};this.children[a].events.mouseover.fired=!0,this.children[a].events.mouseover.callback(c),this.children[a].events.mouseout.fired=!1}if(this.children[a].events.mouseover.fired&&!this.children[a].events.mouseout.fired&&!this["mouseover"+this.children[a].type](this.children[a])&&(this.children[a].events.mouseout.fired=!0,this.children[a].events.mouseover.fired=!1,void 0!=this.children[a].events.mouseout.callback)){var c={target:this.children[a],type:"mouseout"};this.children[a].events.mouseout.callback(c)}}for(var d=!1,a=0;a<this.children.length;a++)if((void 0!=this.children[a].events.mouseover.callback||void 0!=this.children[a].events.click.callback)&&this["mouseover"+this.children[a].type](this.children[a])){d=!0;break}this.mouseStyle&&(d?this.canvas.style.cursor="pointer":this.canvas.style.cursor="default")}},Degas.prototype.drawCube=function(a){this.ctx.beginPath(),this.ctx.rect(-a.width/2,-a.height/2,a.width,a.height),this.ctx.closePath()},Degas.prototype.drawRectangle=function(a){this.ctx.beginPath(),this.ctx.rect(-a.width/2,-a.height/2,a.width,a.height),this.ctx.closePath()},Degas.prototype.drawCircle=function(a){this.ctx.beginPath(),this.ctx.arc(0,0,a.radius,0,2*Math.PI,!1),this.ctx.closePath()},Degas.prototype.drawPath=function(a){if(this.ctx.beginPath(),a.smoothed){if(a.smoothed)if(a.smooth(),a.closed){if(a.closed){this.ctx.moveTo(a.smoothedPoints[a.smoothPointsNumber].x,a.smoothedPoints[a.smoothPointsNumber].y);for(var b=a.smoothPointsNumber+1;b<a.smoothedPoints.length-a.smoothPointsNumber;b++)this.ctx.lineTo(a.smoothedPoints[b].x,a.smoothedPoints[b].y)}}else{this.ctx.moveTo(a.smoothedPoints[0].x,a.smoothedPoints[0].y);for(var b=1;b<a.smoothedPoints.length;b++)this.ctx.lineTo(a.smoothedPoints[b].x,a.smoothedPoints[b].y)}}else{this.ctx.moveTo(a.points[0].x,a.points[0].y);for(var b=1;b<a.points.length;b++)this.ctx.lineTo(a.points[b].x,a.points[b].y);a.closed&&this.ctx.closePath()}},Degas.prototype.drawRegularPolygon=function(a){this.drawPath(a.path)},Degas.prototype.drawArc=function(a){this.ctx.beginPath(),this.ctx.arc(0,0,a.radius,Degas.degreeToRadian(a.startAngle),Degas.degreeToRadian(a.endAngle),a.antiClockwise),this.ctx.closePath()},Degas.prototype.drawImage=function(a){this.ctx.drawImage(a.img,-a.width/2,-a.height/2)},Degas.prototype.drawSprite=function(a){this.ctx.drawImage(a.img,a.width*a.currentFrame,0,a.width,a.height,-a.width/2,-a.height/2,a.width,a.height)},Degas.prototype.drawText=function(a){this.ctx.fillStyle=a.fill,this.ctx.font=a.fontStyle+" "+a.fontSize+" "+a.fontFamily,this.ctx.textAlign=a.textAlign,this.ctx.fillText(a.txt,0,0)},Degas.prototype.mouseoverCircle=function(a){return Degas.distanceBetween(a,this.mouse)<a.radius?!0:!1},Degas.prototype.mouseoverCube=function(a){return this.mouse.x>a.x-a.width/2&&this.mouse.x<a.x+a.width/2&&this.mouse.y>a.y-a.height/2&&this.mouse.y<a.y+a.height/2?!0:!1},Degas.prototype.mouseoverRectangle=function(a){return this.mouse.x>a.x-a.width/2&&this.mouse.x<a.x+a.width/2&&this.mouse.y>a.y-a.height/2&&this.mouse.y<a.y+a.height/2?!0:!1},Degas.prototype.mouseoverRegularPolygon=function(a){var b={x:this.mouse.x-a.x,y:this.mouse.y-a.y};return Degas.pointInPolygon(a.path.points,b)},Degas.prototype.mouseoverImage=function(a){return this.mouse.x>a.x-a.width/2&&this.mouse.x<a.x+a.width/2&&this.mouse.y>a.y-a.height/2&&this.mouse.y<a.y+a.height/2?!0:!1},Degas.prototype.mouseoverSprite=function(a){return this.mouse.x>a.x-a.width/2&&this.mouse.x<a.x+a.width/2&&this.mouse.y>a.y-a.height/2&&this.mouse.y<a.y+a.height/2?!0:!1},Degas.BaseShape=function(){this.uid=0,this.x=0,this.y=0,this.blendMode="source-over",this.rotation=0,this.scaleX=1,this.scaleY=1,this.opacity=1,this.fill="",this.stroke="",this.strokeWidth=1,this.lineCap="butt",this.lineJoin="miter",this.shadowBlur=0,this.shadowColor="#000",this.mask,this.group,this.events={mouseover:{fired:!1,callback:void 0},mouseout:{fired:!1,callback:void 0},click:{fired:!1,callback:void 0}}},Degas.BaseShape.prototype.addEventListener=function(a,b){void 0!=this.events[a]&&(this.events[a].fired=!1,this.events[a].callback=b)},Degas.Cube=function(a){this.type="Cube",this.width=a||50,this.height=a||50,this.size=a||50,this.events={mouseover:{fired:!1,callback:void 0},mouseout:{fired:!1,callback:void 0},click:{fired:!1,callback:void 0}}},Degas.Cube.prototype=new Degas.BaseShape,Degas.Cube.prototype.setSize=function(a){void 0==a||null==a||isNaN(parseFloat(a))||(this.width=a,this.height=a,this.size=a)},Degas.Rectangle=function(a,b){this.type="Rectangle",this.width=a||150,this.height=b||100,this.events={mouseover:{fired:!1,callback:void 0},mouseout:{fired:!1,callback:void 0},click:{fired:!1,callback:void 0}}},Degas.Rectangle.prototype=new Degas.BaseShape,Degas.Circle=function(a){this.type="Circle",this.radius=a||50,this.events={mouseover:{fired:!1,callback:void 0},mouseout:{fired:!1,callback:void 0},click:{fired:!1,callback:void 0}}},Degas.Circle.prototype=new Degas.BaseShape,Degas.RegularPolygon=function(a,b){this.type="RegularPolygon",this.radius=a||50;for(var c=b||5,d=[],e=2*Math.PI/c,f=0;c>f;f++)d.push(new Degas.Point(this.radius*Math.sin(e*f),this.radius*Math.cos(e*f)));this.path=new Degas.Path(d),this.events={mouseover:{fired:!1,callback:void 0},mouseout:{fired:!1,callback:void 0},click:{fired:!1,callback:void 0}}},Degas.RegularPolygon.prototype=new Degas.BaseShape,Degas.Image=function(a,b){var c=this;this.type="Image",this.src=a||"",this.loaded=!1,this.img=new Image,this.img.onload=function(){c.loaded=!0,c.width=c.img.width,c.height=c.img.height,void 0!=b&&b(c)},""!=this.src&&(this.img.src=this.src),this.events={mouseover:{fired:!1,callback:void 0},mouseout:{fired:!1,callback:void 0},click:{fired:!1,callback:void 0}}},Degas.Image.prototype=new Degas.BaseShape,Degas.Sprite=function(a,b,c,d,e,f,g){var h=this;this.type="Sprite",this.src=a||"",this.loaded=!1,this.img=new Image,this.frames=d,this.loop=f||!1,this.width=b,this.height=c,this.pWidth,this.pHeight,this.currentFrame=0,this.reverse=!1,this.fps=e||30,this.interval,this.img.onload=function(){h.loaded=!0,h.pWidth=h.img.width,h.pHeight=h.img.height,void 0!=g&&g(h)},""!=this.src&&(this.img.src=this.src),this.events={mouseover:{fired:!1,callback:void 0},mouseout:{fired:!1,callback:void 0},click:{fired:!1,callback:void 0}}},Degas.Sprite.prototype=new Degas.BaseShape,Degas.Sprite.prototype.nextFrame=function(){this.currentFrame<this.frames-1?this.currentFrame++:this.loop?this.currentFrame=0:this.stop()},Degas.Sprite.prototype.prevFrame=function(){this.currentFrame>0?this.currentFrame--:this.loop?this.currentFrame=this.frames-1:this.stop()},Degas.Sprite.prototype.render=function(){this.reverse?this.prevFrame():this.nextFrame()},Degas.Sprite.prototype.play=function(){var a=this;void 0==this.interval&&(this.interval=setInterval(function(){a.render()},1e3/this.fps))},Degas.Sprite.prototype.stop=function(){var a=this;clearInterval(a.interval),a.interval=void 0},Degas.Sprite.prototype.gotoAndPlay=function(a){a>-1&&a<this.frames-1&&(this.currentFrame=a,this.loop=!1,this.play())},Degas.Sprite.prototype.gotoAndStop=function(a){a>-1&&a<this.frames-1&&(this.currentFrame=a,this.loop=!1,this.stop())},Degas.Text=function(a,b){this.type="Text",this.txt=a,this.fontFamily=b.fontFamily||"Arial",this.fontSize=b.fontSize||"16px",this.fontStyle=b.fontStyle||"normal",this.textAlign=b.textAlign||"center",this.events={mouseover:{fired:!1,callback:void 0},mouseout:{fired:!1,callback:void 0},click:{fired:!1,callback:void 0}}},Degas.Text.prototype=new Degas.BaseShape,Degas.Path=function(a){this.type="Path",this.points=a,this.smoothedPoints,this.smoothed=!1,this.closed=!1,this.tension=.5,this.smoothPointsNumber=16,this.events={mouseover:{fired:!1,callback:void 0},mouseout:{fired:!1,callback:void 0},click:{fired:!1,callback:void 0}}},Degas.Path.prototype=new Degas.BaseShape,Degas.Path.prototype.smooth=function(){var a=[];this.closed&&(a.push(this.points[this.points.length-1].x),a.push(this.points[this.points.length-1].y));for(var b=0;b<this.points.length;b++)a.push(this.points[b].x),a.push(this.points[b].y);this.closed&&(a.push(this.points[0].x),a.push(this.points[0].y),a.push(this.points[1].x),a.push(this.points[1].y));var c=Degas.smoothPath(a,this.tension,!1,this.smoothPointsNumber);this.smoothedPoints=[];for(var b=0;b<c.length;b+=2)this.smoothedPoints.push(new Degas.Point(c[b],c[b+1]));this.smoothed=!0},Degas.Path.prototype.unSmooth=function(){this.smoothed=!1},Degas.Path.prototype.add=function(a){this.points.push(a)},Degas.Path.prototype.shuffle=function(a){for(var b=0;b<this.points.length;b++)this.points[b].moveRandom(a)},Degas.Arc=function(a,b,c,d){this.type="Arc",this.startAngle=a||0,this.endAngle=b||45,this.radius=c||50,this.antiClockwise=d||!1,this.events={mouseover:{fired:!1,callback:void 0},mouseout:{fired:!1,callback:void 0},click:{fired:!1,callback:void 0}}},Degas.Arc.prototype=new Degas.BaseShape,Degas.Point=function(a,b){this.type="Point",this.x=a||0,this.y=b||0},Degas.Point.prototype.moveRandom=function(a){this.x+=Math.round(2*Math.random()*a)-a,this.y+=Math.round(2*Math.random()*a)-a},Degas.Group=function(){this.uid=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.opacity=1,this.events={mouseover:{fired:!1,callback:void 0},mouseout:{fired:!1,callback:void 0},click:{fired:!1,callback:void 0}}},Degas.Group.prototype.add=function(a){a.group=this},Degas.Group.prototype.remove=function(a){a.group=void 0},Degas.smoothPath=function(a,b,c,d){b="undefined"!=typeof b?b:.5,c=c?c:!1,d=d?d:16;var e,f,g,h,i,j,k,l,m,n,o,p,q,r=[],s=[];for(r=a.slice(0),c?(r.unshift(r[r.length-1]),r.unshift(r[r.length-2]),r.unshift(r[r.length-1]),r.unshift(r[r.length-2]),r.push(r[0]),r.push(r[1])):(r.unshift(r[1]),r.unshift(r[0]),r.push(r[r.length-2]),r.push(r[r.length-1])),q=2;q<r.length-4;q+=2)for(p=0;d>=p;p++)g=(r[q+2]-r[q-2])*b,h=(r[q+4]-r[q])*b,i=(r[q+3]-r[q-1])*b,j=(r[q+5]-r[q+1])*b,o=p/d,k=2*Math.pow(o,3)-3*Math.pow(o,2)+1,l=-(2*Math.pow(o,3))+3*Math.pow(o,2),m=Math.pow(o,3)-2*Math.pow(o,2)+o,n=Math.pow(o,3)-Math.pow(o,2),e=k*r[q]+l*r[q+2]+m*g+n*h,f=k*r[q+1]+l*r[q+3]+m*i+n*j,s.push(e),s.push(f);return s},Degas.degreeToRadian=function(a){return a*Math.PI/180},Degas.radianToDegree=function(a){return 180*a/Math.PI},Degas.distanceBetween=function(a,b){var c=0,d=0;return c=b.x-a.x,c*=c,d=b.y-a.y,d*=d,Math.sqrt(c+d)},Degas.pointInPolygon=function(a,b){for(var c=!1,d=-1,e=a.length,f=e-1;++d<e;f=d)(a[d].y<=b.y&&b.y<a[f].y||a[f].y<=b.y&&b.y<a[d].y)&&b.x<(a[f].x-a[d].x)*(b.y-a[d].y)/(a[f].y-a[d].y)+a[d].x&&(c=!c);return c};var Montana=function(){};Montana.randomColor=function(){for(var a="0123456789ABCDEF".split(""),b="#",c=0;6>c;c++)b+=a[Math.round(15*Math.random())];return b},Montana.randomColorFromScheme=function(a){var b=Montana.scheme[a][Math.round(Math.random()*(Montana.scheme[a].length-1))];return b},Montana.changeColorLuminance=function(a,b){a=String(a).replace(/[^0-9a-f]/gi,""),a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),b=b||0;var c,d,e="#";for(d=0;3>d;d++)c=parseInt(a.substr(2*d,2),16),c=Math.round(Math.min(Math.max(0,c+c*b),255)).toString(16),e+=("00"+c).substr(c.length);return e},Montana.hexToRgb=function(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(b,function(a,b,c,d){return b+b+c+c+d+d});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:null},Montana.componentToHex=function(a){var b=a.toString(16);return 1==b.length?"0"+b:b},Montana.rgbToHex=function(a,b,c){return"#"+this.componentToHex(a)+this.componentToHex(b)+this.componentToHex(c)},Montana.getPixelColor=function(a,b,c){var d=a.getContext("2d").getImageData(b,c,1,1),e=d.data[0],f=d.data[1],g=d.data[2];d.data[3];return Montana.rgbToHex(e,f,g)},Montana.scheme={},Montana.scheme.beach=["#FFD946","#F9C74B","#2996C1","#268DA5","#FFFFFF"],Montana.scheme.bert=["#F0EDE6","#95BFB8","#63A497","#332936","#DCD5C1"],Montana.scheme.breizh=["#275D8C","#0578A6","#15A0BF","#BFB1A8","#F2D5C4"],Montana.scheme.cake=["#BF3B58","#5B3349","#F4C284","#F5A286","#F06363"],Montana.scheme.dawn=["#A49294","#282240","#2E2759","#323073","#BF5F56"],Montana.scheme.irland=["#005572","#006573","#008B8D","#81BEAA","#F4D4AD"],Montana.scheme.mint=["#005B4F","#157362","#61A486","#92D7B2","#C3F4D0"],Montana.scheme.nebula=["#D99F00","#D92B4B","#040740","#010626","#0596A6","#0BD9C4"],Montana.scheme.patriot=["#BF3542","#CDC5BA","#EBE3D6","#1F2A3C","#2E2E2E"],Montana.scheme.volcano=["#D6D0D9","#252622","#F27B35","#F2622E","#F2522E"];var Villani=function(){};Villani.degreeToRadian=function(a){return a*Math.PI/180},Villani.radianToDegree=function(a){return 180*a/Math.PI},Villani.average=function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b/=a.length},Villani.range=function(a,b){return Math.random()*(b-a)+a},Villani.distanceBetween=function(a,b){var c=0,d=0;return c=b.x-a.x,c*=c,d=b.y-a.y,d*=d,Math.sqrt(c+d)},Villani.pointInCircle=function(a,b,c){var d=!1;return Math.abs(this.distanceBetween(a,b))<=c&&(d=!0),d},Villani.collisionCicleRect=function(a,b){var c=Math.abs(a.x-b.x),d=Math.abs(a.y-b.y);if(c>b.width/2+a.radius)return!1;if(d>b.height/2+a.radius)return!1;if(c<=b.width/2)return!0;if(d<=b.height/2)return!0;var e=c,f=d;return e*e+f*f<=a.radius*a.radius},Villani.collisionCicleRectWithDatas=function(a,b){var c=Math.abs(a.x-b.x),d=Math.abs(a.y-b.y);if(c>b.width/2+a.radius)return{colliding:!1,axe:"vertical"};if(d>b.height/2+a.radius)return{colliding:!1,axe:"horizontal"};if(c<=b.width/2)return{colliding:!0,axe:"vertical"};if(d<=b.height/2)return{colliding:!0,axe:"horizontal"};var e=c,f=d;return e*e+f*f<=a.radius*a.radius},Villani.smoothPath=function(a,b,c,d){b="undefined"!=typeof b?b:.5,c=c?c:!1,d=d?d:16;var e,f,g,h,i,j,k,l,m,n,o,p,q,r=[],s=[];for(r=a.slice(0),c?(r.unshift(r[r.length-1]),r.unshift(r[r.length-2]),r.unshift(r[r.length-1]),r.unshift(r[r.length-2]),r.push(r[0]),r.push(r[1])):(r.unshift(r[1]),r.unshift(r[0]),r.push(r[r.length-2]),r.push(r[r.length-1])),q=2;q<r.length-4;q+=2)for(p=0;d>=p;p++)g=(r[q+2]-r[q-2])*b,h=(r[q+4]-r[q])*b,i=(r[q+3]-r[q-1])*b,j=(r[q+5]-r[q+1])*b,o=p/d,k=2*Math.pow(o,3)-3*Math.pow(o,2)+1,l=-(2*Math.pow(o,3))+3*Math.pow(o,2),m=Math.pow(o,3)-2*Math.pow(o,2)+o,n=Math.pow(o,3)-Math.pow(o,2),e=k*r[q]+l*r[q+2]+m*g+n*h,f=k*r[q+1]+l*r[q+3]+m*i+n*j,s.push(e),s.push(f);return s},Villani.pointInPolygon=function(a,b){for(var c=!1,d=-1,e=a.length,f=e-1;++d<e;f=d)(a[d].y<=b.y&&b.y<a[f].y||a[f].y<=b.y&&b.y<a[d].y)&&b.x<(a[f].x-a[d].x)*(b.y-a[d].y)/(a[f].y-a[d].y)+a[d].x&&(c=!c);return c},Villani.normalise=function(a,b,c){return(value-b)/(c-b)};